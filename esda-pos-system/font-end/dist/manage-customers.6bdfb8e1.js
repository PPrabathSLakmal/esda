const t="http://localhost:8080/pos",a=$("#txtId"),e=$("#txtName"),n=$("#txtAddress"),l=$("#txtContact"),o=$("#btn-save-customer"),i=$("#btn-new-customer"),s=$("tbody"),r=$("#txt-search-customer");$("#modal-foot");let d=[];const c=[a,e,n,l];function h(t,s,r,d){console.log(t),console.log(s),i.trigger("click"),a.val(`${t}`),e.val(`${s}`),n.val(`${r}`),l.val(`${d}`),o.text("Update Customer")}function m(a){let e=$.ajax(`${t}/customers`,{method:"GET",contentType:"application/json",data:{q:a}});e.done(()=>{s.empty(),(d=JSON.parse(e.responseText)).forEach(t=>{s.append(`
                  <tr>
                    <th scope="row">${t.id}</th>
                    <td>${t.name}</td>
                    <td>${t.address}</td>
                    <td>${t.contact}</td>
                    <td>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-pencil edit" viewBox="0 0 16 16">
                            <path d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"/>
                        </svg>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi delete bi-trash" viewBox="0 0 16 16">
                            <path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6Z"/>
                            <path d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1ZM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118ZM2.5 3h11V2h-11v1Z"/>
                        </svg>
                    </td>
                </tr>
            `)})}),e.fail(()=>{})}function v(t){c.forEach(a=>{a.removeClass("animate__shakeX is-invalid"),t&&a.val("")}),t&&e.focus()}function p(t,a){return setTimeout(()=>t.addClass("animate__shakeX is-invalid"),0),t.trigger("select"),t.trigger("focus"),t.next().text(a),!1}function u(){if(d.length)return`C${(d[d.length-1].id+1).toString().padStart(3,"0")}`;a.val("C001")}i.on("click",()=>{a.val(`${u()}`)}),c.forEach(t=>{t.addClass("animate__animated"),t.on("input",()=>{t.removeClass("animate__shakeX is-invalid")})}),m(""),o.on("click",()=>{if(!function(){let t=e.val().trim(),a=n.val().trim(),o=l.val().trim(),i=!0;return v(),a?/^.{3,}$/.test(a)||(i=p(n,"Invalid address")):i=p(n,"Address can not be empty"),o?/^\d{3}-\d{7}$/.test(o)||(i=p(l,"Invalid number")):i=p(l,"Contact can not be empty"),t?/^[A-Za-z ]+$/.test(t)||(i=p(e,"Invalid name")):i=p(e,"Name can not be empty"),i}())return!1;if(console.log(o.text()),"Save Customer"===o.text()){let o=JSON.stringify({name:e.val().trim(),address:n.val().trim(),contact:l.val().trim()}),i=$.ajax(`${t}/customers`,{method:"POST",contentType:"application/json",data:o});i.done(()=>{v("clearData"),m(""),a.val(`${u()}`)}),i.fail(()=>{})}else if("Update Customer"===o.text()){let o=JSON.stringify({name:e.val().trim(),address:n.val().trim(),contact:l.val().trim()}),i=$.ajax(`${t}/customers/${a.val().trim()}`,{method:"PATCH",contentType:"application/json",data:o});i.done(()=>{v("clearData"),h("")})}}),r.on("input",t=>{m(r.val().trim())}),s.on("click",a=>{let e=$(a.target).parents("tr"),n=e.children("th").text(),l=e.children("td:nth-child(2)").text(),o=e.children("td:nth-child(3)").text(),i=e.children("td:nth-child(4)").text();$(a.target).hasClass("delete")&&function(a){let e=$.ajax(`${t}/customers?id=${a}`,{method:"DELETE",contentType:"application/x-www-form-urlencoded"});e.done(()=>{m("")}),e.fail(()=>{})}(n),$(a.target).hasClass("edit")&&(console.log(n),h(n,l,o,i))});
//# sourceMappingURL=manage-customers.6bdfb8e1.js.map
